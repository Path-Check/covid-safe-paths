name: lokalise-pull

on:
  schedule:
    # Run once every four hours
    - cron:  '0 */4 * * *'

jobs:
  lokalise-pull:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Pull latest changes from lokalise
        run: yarn i18n:pull
        env:
          LOKALISE_TOKEN: ${{ secrets.LOKALISE_TOKEN }}

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
            commit-message: Automated lokalise data update
            title: Automated lokalise data update
            body: |
              - Automated lokalise data update

              Auto-generated by [create-pull-request][1]. Please note that
              this PR needs to be reviewed and merged manually.

              [1]: https://github.com/peter-evans/create-pull-request
